cls

mkdir test-data\WEKA_FILES
mkdir test-data\OPCODE_FILES
mkdir test-data\OPCODE_FILES\SECURE
mkdir test-data\OPCODE_FILES\VULNERABLE

rem del test-data\performance_measuring.log
echo N START_TIME END_TIME DIFF MSG >> test-data\performance_measuring.log


set START_TIME=%TIME%
set /A START_TIME_VALUE=(1%START_TIME:~0,2%-100)*3600000 + (1%START_TIME:~3,2%-100)*60000 + (1%START_TIME:~6,2%-100)*1000 + (1%START_TIME:~9,2%-100)*10
REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------
REM 1-Disassemble files...
python 001_generate_weka_file.py > D:\test\test-data\WEKA_FILES\weka_opcode.arff
REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------
set END_TIME=%TIME%
set /A END_TIME_VALUE=(1%END_TIME:~0,2%-100)*3600000 + (1%END_TIME:~3,2%-100)*60000 + (1%END_TIME:~6,2%-100)*1000 + (1%END_TIME:~9,2%-100)*10
set /A DIFF=(%END_TIME_VALUE% - %START_TIME_VALUE%)
echo %1 %START_TIME% %END_TIME% %DIFF% EXECUTABLE_FILES_DISASSEMBLED >> test-data\performance_measuring.log


REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------
REM 2-Generate n-gram util batch files...
CSCRIPT /nologo 002_NGramGeneraterBatchFile.vbs "%1" > 002_NGramGeneraterBatchFile_%1.bat
REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------
REM 3-Generate the n-gram generator batch files...
CSCRIPT /nologo 003_NGramFileFormatter.vbs "%1" > 003_NGramFileFormatter_%1.bat
REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------
REM 4-Generate the n-gram data...
002_NGramGeneraterBatchFile_%1.bat %1
REM ----------------------------------------------------------------------------------
REM ----------------------------------------------------------------------------------

REM ----------------------------------------------------------------------------------
REM 5-Format the n-gram data
REM 003_NGramFileFormatter_%1.bat
REM ----------------------------------------------------------------------------------

REM ----------------------------------------------------------------------------------
REM 6-Generate WEKA file...
REM CSCRIPT /nologo 005_generateWekaFile.vbs "%1" > "D:\test\test-data\WEKA_FILES\weka_ngram_%1.arff"
REM ----------------------------------------------------------------------------------
